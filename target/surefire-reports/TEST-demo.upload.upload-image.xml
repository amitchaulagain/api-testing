<?xml version="1.0" encoding="UTF-8"?>
<testsuite failures="0"
           name="file upload end-point"
           skipped="0"
           tests="2"
           time="0.128281">
   <testcase classname="demo.upload.upload-image"
             name="upload image - multipart"
             time="0.080967">
      <system-out>* url demoBaseUrl...........................................................passed
Given path 'files'..........................................................passed
And multipart file myFile = { read: 'karate-logo.jpg', filename: 'karate-logo.jpg', contentType: 'image/jpg' }.passed
And multipart field message = 'image test'..................................passed
When method post............................................................passed
Then status 200.............................................................passed
And match response == { id: '#uuid', filename: 'karate-logo.jpg', message: 'image test', contentType: 'image/jpg' }.passed
And def id = response.id....................................................passed
Given path 'files', id......................................................passed
When method get.............................................................passed
Then status 200.............................................................passed
And match response == read('karate-logo.jpg')...............................passed
And match header Content-Disposition contains 'attachment'..................passed
And match header Content-Disposition contains 'karate-logo.jpg'.............passed
And match header Content-Type == 'image/jpg'................................passed
</system-out>
   </testcase>
   <testcase classname="demo.upload.upload-image"
             name="upload image - binary request body"
             time="0.047314">
      <system-out>* url demoBaseUrl...........................................................passed
Given path 'files', 'binary'................................................passed
And param name = 'karate-logo.jpg'..........................................passed
And request read('karate-logo.jpg').........................................passed
When method post............................................................passed
Then status 200.............................................................passed
And match response contains { id: '#uuid' }.................................passed
And def id = response.id....................................................passed
Given path 'files', id......................................................passed
When method get.............................................................passed
Then status 200.............................................................passed
And match response == read('karate-logo.jpg')...............................passed
And match header Content-Disposition contains 'karate-logo.jpg'.............passed
</system-out>
   </testcase>
</testsuite>
