[
  {
    "line": 1,
    "elements": [
      {
        "line": 4,
        "name": "",
        "description": "",
        "type": "background",
        "keyword": "Background",
        "steps": [
          {
            "result": {
              "duration": 0,
              "status": "passed"
            },
            "line": 0,
            "name": "call [common routine that updates the configured headers and cookies] common.feature",
            "match": {},
            "keyword": "* "
          },
          {
            "result": {
              "duration": 0,
              "status": "passed"
            },
            "line": 5,
            "name": "url demoBaseUrl",
            "match": {
              "arguments": [
                {
                  "val": "demoBaseUrl",
                  "offset": 4
                }
              ],
              "location": "StepDefs.url(String)"
            },
            "keyword": "Given "
          },
          {
            "result": {
              "duration": 0,
              "status": "passed"
            },
            "line": 6,
            "name": "path \u0027headers\u0027",
            "match": {
              "arguments": [
                {
                  "val": "\u0027headers\u0027",
                  "offset": 5
                }
              ],
              "location": "StepDefs.path(String\u003e)"
            },
            "keyword": "And "
          },
          {
            "result": {
              "duration": 0,
              "status": "passed"
            },
            "line": 7,
            "name": "method get",
            "match": {
              "arguments": [
                {
                  "val": "get",
                  "offset": 7
                }
              ],
              "location": "StepDefs.method(String)"
            },
            "keyword": "When ",
            "doc_string": {
              "content_type": "",
              "line": 7,
              "value": "13:17:33.379 request:\n1 \u003e GET http://127.0.0.1:58351/headers\n1 \u003e Accept-Encoding: gzip,deflate\n1 \u003e Connection: Keep-Alive\n1 \u003e Host: 127.0.0.1:58351\n1 \u003e User-Agent: Apache-HttpClient/4.5.5 (Java/1.8.0_162)\n\n13:17:33.381 response time in milliseconds: 2\n1 \u003c 200\n1 \u003c Cache-Control: no-cache, no-store, max-age\u003d0, must-revalidate\n1 \u003c Content-Length: 36\n1 \u003c Content-Type: text/plain;charset\u003dUTF-8\n1 \u003c Date: Thu, 20 Sep 2018 07:32:32 GMT\n1 \u003c Expires: 0\n1 \u003c Pragma: no-cache\n1 \u003c Set-Cookie: time\u003d1537428753380\n1 \u003c X-Content-Type-Options: nosniff\n1 \u003c X-Frame-Options: DENY\n1 \u003c X-XSS-Protection: 1; mode\u003dblock\na3cf135c-4e50-40b9-8ff9-d64341c6979e\n\n"
            }
          },
          {
            "result": {
              "duration": 0,
              "status": "passed"
            },
            "line": 8,
            "name": "status 200",
            "match": {
              "arguments": [
                {
                  "val": "200",
                  "offset": 7
                }
              ],
              "location": "StepDefs.status(int)"
            },
            "keyword": "Then "
          },
          {
            "result": {
              "duration": 0,
              "status": "passed"
            },
            "line": 10,
            "name": "def time \u003d responseCookies.time.value",
            "match": {
              "arguments": [
                {
                  "val": "time",
                  "offset": 4
                },
                {
                  "val": "responseCookies.time.value",
                  "offset": 11
                }
              ],
              "location": "StepDefs.def(String,String)"
            },
            "keyword": "* "
          },
          {
            "result": {
              "duration": 0,
              "status": "passed"
            },
            "line": 11,
            "name": "def token \u003d response",
            "match": {
              "arguments": [
                {
                  "val": "token",
                  "offset": 4
                },
                {
                  "val": "response",
                  "offset": 12
                }
              ],
              "location": "StepDefs.def(String,String)"
            },
            "keyword": "* "
          },
          {
            "result": {
              "duration": 0,
              "status": "passed"
            },
            "comments": [
              {
                "line": 12,
                "value": "# cookies are auto-configured, i.e. they \u0027persist\u0027 for subsequent HTTP calls"
              },
              {
                "line": 14,
                "value": "# if you are using \u0027shared scope\u0027: https://github.com/intuit/karate#shared-scope"
              },
              {
                "line": 15,
                "value": "# this next line will update the global scope, which is the recommended approach for re-usable sign-in / auth flows"
              }
            ],
            "line": 16,
            "name": "configure headers \u003d read(\u0027classpath:headers.js\u0027)",
            "match": {
              "arguments": [
                {
                  "val": "headers",
                  "offset": 10
                },
                {
                  "val": "read(\u0027classpath:headers.js\u0027)",
                  "offset": 20
                }
              ],
              "location": "StepDefs.configure(String,String)"
            },
            "keyword": "* "
          },
          {
            "result": {
              "duration": 293663891,
              "status": "passed"
            },
            "comments": [
              {
                "line": 5,
                "value": "# the shape of the next line is important. if the line starts with call (or callonce)"
              },
              {
                "line": 6,
                "value": "# the called script will update the \u0027shared scope\u0027 here in this file"
              },
              {
                "line": 7,
                "value": "# think of it as similar to an \u0027include\u0027 directive in some programming languages"
              },
              {
                "line": 8,
                "value": "# detailed documentation: https://github.com/intuit/karate#shared-scope"
              }
            ],
            "line": 9,
            "name": "callonce read(\u0027common.feature\u0027)",
            "match": {
              "arguments": [
                {
                  "val": "read(\u0027common.feature\u0027)",
                  "offset": 9
                },
                {}
              ],
              "location": "StepDefs.callOnceAndUpdateConfigAndVars(String,String)"
            },
            "keyword": "* ",
            "doc_string": {
              "content_type": "",
              "line": 9,
              "value": "13:17:33.657 cached callonce: read(\u0027common.feature\u0027)\n"
            }
          },
          {
            "result": {
              "duration": 109341,
              "status": "passed"
            },
            "line": 10,
            "name": "url demoBaseUrl",
            "match": {
              "arguments": [
                {
                  "val": "demoBaseUrl",
                  "offset": 4
                }
              ],
              "location": "StepDefs.url(String)"
            },
            "keyword": "* "
          }
        ]
      },
      {
        "comments": [
          {
            "line": 12,
            "value": "# for an example of NOT using \u0027shared scope\u0027"
          },
          {
            "line": 13,
            "value": "# refer to \u0027call-isolated-headers.feature\u0027 and \u0027common-multiple.feature\u0027"
          }
        ],
        "line": 15,
        "name": "no extra config - they have been set automatically by \u0027common.feature\u0027",
        "description": "",
        "id": "a-called-feature-can-\u0027contribute\u0027-to-variables-and-config;no-extra-config---they-have-been-set-automatically-by-\u0027common.feature\u0027",
        "type": "scenario",
        "keyword": "Scenario",
        "steps": [
          {
            "result": {
              "duration": 250054,
              "status": "passed"
            },
            "line": 16,
            "name": "path \u0027headers\u0027, token",
            "match": {
              "arguments": [
                {
                  "val": "\u0027headers\u0027, token",
                  "offset": 5
                }
              ],
              "location": "StepDefs.path(String\u003e)"
            },
            "keyword": "Given "
          },
          {
            "result": {
              "duration": 61447,
              "status": "passed"
            },
            "line": 17,
            "name": "param url \u003d demoBaseUrl",
            "match": {
              "arguments": [
                {
                  "val": "url",
                  "offset": 6
                },
                {
                  "val": "demoBaseUrl",
                  "offset": 12
                }
              ],
              "location": "StepDefs.param(String,String\u003e)"
            },
            "keyword": "And "
          },
          {
            "result": {
              "duration": 14499607,
              "status": "passed"
            },
            "line": 18,
            "name": "method get",
            "match": {
              "arguments": [
                {
                  "val": "get",
                  "offset": 7
                }
              ],
              "location": "StepDefs.method(String)"
            },
            "keyword": "When ",
            "doc_string": {
              "content_type": "",
              "line": 18,
              "value": "13:17:33.662 request:\n1 \u003e GET http://127.0.0.1:58351/headers/a3cf135c-4e50-40b9-8ff9-d64341c6979e?url\u003dhttp%3A%2F%2F127.0.0.1%3A58351\n1 \u003e Accept-Encoding: gzip,deflate\n1 \u003e Authorization: a3cf135c-4e50-40b9-8ff9-d64341c6979e1537428753380http://127.0.0.1:58351\n1 \u003e Connection: Keep-Alive\n1 \u003e Cookie: time\u003d1537428753380\n1 \u003e Host: 127.0.0.1:58351\n1 \u003e User-Agent: Apache-HttpClient/4.5.5 (Java/1.8.0_162)\n1 \u003e request_id: 15e21f08-e87a-4ca1-9d0f-d2e8655b2e14\n\n13:17:33.673 response time in milliseconds: 11\n1 \u003c 200\n1 \u003c Cache-Control: no-cache, no-store, max-age\u003d0, must-revalidate\n1 \u003c Content-Length: 0\n1 \u003c Date: Thu, 20 Sep 2018 07:32:33 GMT\n1 \u003c Expires: 0\n1 \u003c Pragma: no-cache\n1 \u003c X-Content-Type-Options: nosniff\n1 \u003c X-Frame-Options: DENY\n1 \u003c X-XSS-Protection: 1; mode\u003dblock\n\n"
            }
          },
          {
            "result": {
              "duration": 102632,
              "status": "passed"
            },
            "line": 19,
            "name": "status 200",
            "match": {
              "arguments": [
                {
                  "val": "200",
                  "offset": 7
                }
              ],
              "location": "StepDefs.status(int)"
            },
            "keyword": "Then "
          }
        ]
      },
      {
        "line": 4,
        "name": "",
        "description": "",
        "type": "background",
        "keyword": "Background",
        "steps": [
          {
            "result": {
              "duration": 5138468,
              "status": "passed"
            },
            "comments": [
              {
                "line": 5,
                "value": "# the shape of the next line is important. if the line starts with call (or callonce)"
              },
              {
                "line": 6,
                "value": "# the called script will update the \u0027shared scope\u0027 here in this file"
              },
              {
                "line": 7,
                "value": "# think of it as similar to an \u0027include\u0027 directive in some programming languages"
              },
              {
                "line": 8,
                "value": "# detailed documentation: https://github.com/intuit/karate#shared-scope"
              }
            ],
            "line": 9,
            "name": "callonce read(\u0027common.feature\u0027)",
            "match": {
              "arguments": [
                {
                  "val": "read(\u0027common.feature\u0027)",
                  "offset": 9
                },
                {}
              ],
              "location": "StepDefs.callOnceAndUpdateConfigAndVars(String,String)"
            },
            "keyword": "* ",
            "doc_string": {
              "content_type": "",
              "line": 9,
              "value": "13:17:33.679 callonce cache hit for: read(\u0027common.feature\u0027)\n"
            }
          },
          {
            "result": {
              "duration": 31228,
              "status": "passed"
            },
            "line": 10,
            "name": "url demoBaseUrl",
            "match": {
              "arguments": [
                {
                  "val": "demoBaseUrl",
                  "offset": 4
                }
              ],
              "location": "StepDefs.url(String)"
            },
            "keyword": "* "
          }
        ]
      },
      {
        "line": 21,
        "name": "make sure that the second scenario works as well with callonce",
        "description": "",
        "id": "a-called-feature-can-\u0027contribute\u0027-to-variables-and-config;make-sure-that-the-second-scenario-works-as-well-with-callonce",
        "type": "scenario",
        "keyword": "Scenario",
        "steps": [
          {
            "result": {
              "duration": 1630304,
              "status": "passed"
            },
            "line": 22,
            "name": "path \u0027headers\u0027, token",
            "match": {
              "arguments": [
                {
                  "val": "\u0027headers\u0027, token",
                  "offset": 5
                }
              ],
              "location": "StepDefs.path(String\u003e)"
            },
            "keyword": "Given "
          },
          {
            "result": {
              "duration": 62783,
              "status": "passed"
            },
            "line": 23,
            "name": "param url \u003d demoBaseUrl",
            "match": {
              "arguments": [
                {
                  "val": "url",
                  "offset": 6
                },
                {
                  "val": "demoBaseUrl",
                  "offset": 12
                }
              ],
              "location": "StepDefs.param(String,String\u003e)"
            },
            "keyword": "And "
          },
          {
            "result": {
              "duration": 4035307,
              "status": "passed"
            },
            "line": 24,
            "name": "method get",
            "match": {
              "arguments": [
                {
                  "val": "get",
                  "offset": 7
                }
              ],
              "location": "StepDefs.method(String)"
            },
            "keyword": "When ",
            "doc_string": {
              "content_type": "",
              "line": 24,
              "value": "13:17:33.683 request:\n1 \u003e GET http://127.0.0.1:58351/headers/a3cf135c-4e50-40b9-8ff9-d64341c6979e?url\u003dhttp%3A%2F%2F127.0.0.1%3A58351\n1 \u003e Accept-Encoding: gzip,deflate\n1 \u003e Authorization: a3cf135c-4e50-40b9-8ff9-d64341c6979e1537428753380http://127.0.0.1:58351\n1 \u003e Connection: Keep-Alive\n1 \u003e Cookie: time\u003d1537428753380\n1 \u003e Host: 127.0.0.1:58351\n1 \u003e User-Agent: Apache-HttpClient/4.5.5 (Java/1.8.0_162)\n1 \u003e request_id: d31633a9-03f0-48be-adfc-d967eb9d245d\n\n13:17:33.686 response time in milliseconds: 3\n1 \u003c 200\n1 \u003c Cache-Control: no-cache, no-store, max-age\u003d0, must-revalidate\n1 \u003c Content-Length: 0\n1 \u003c Date: Thu, 20 Sep 2018 07:32:33 GMT\n1 \u003c Expires: 0\n1 \u003c Pragma: no-cache\n1 \u003c X-Content-Type-Options: nosniff\n1 \u003c X-Frame-Options: DENY\n1 \u003c X-XSS-Protection: 1; mode\u003dblock\n\n"
            }
          },
          {
            "result": {
              "duration": 42147,
              "status": "passed"
            },
            "line": 25,
            "name": "status 200",
            "match": {
              "arguments": [
                {
                  "val": "200",
                  "offset": 7
                }
              ],
              "location": "StepDefs.status(int)"
            },
            "keyword": "Then "
          }
        ]
      },
      {
        "line": 4,
        "name": "",
        "description": "",
        "type": "background",
        "keyword": "Background",
        "steps": [
          {
            "result": {
              "duration": 7833687,
              "status": "passed"
            },
            "comments": [
              {
                "line": 5,
                "value": "# the shape of the next line is important. if the line starts with call (or callonce)"
              },
              {
                "line": 6,
                "value": "# the called script will update the \u0027shared scope\u0027 here in this file"
              },
              {
                "line": 7,
                "value": "# think of it as similar to an \u0027include\u0027 directive in some programming languages"
              },
              {
                "line": 8,
                "value": "# detailed documentation: https://github.com/intuit/karate#shared-scope"
              }
            ],
            "line": 9,
            "name": "callonce read(\u0027common.feature\u0027)",
            "match": {
              "arguments": [
                {
                  "val": "read(\u0027common.feature\u0027)",
                  "offset": 9
                },
                {}
              ],
              "location": "StepDefs.callOnceAndUpdateConfigAndVars(String,String)"
            },
            "keyword": "* ",
            "doc_string": {
              "content_type": "",
              "line": 9,
              "value": "13:17:33.694 callonce cache hit for: read(\u0027common.feature\u0027)\n"
            }
          },
          {
            "result": {
              "duration": 35011,
              "status": "passed"
            },
            "line": 10,
            "name": "url demoBaseUrl",
            "match": {
              "arguments": [
                {
                  "val": "demoBaseUrl",
                  "offset": 4
                }
              ],
              "location": "StepDefs.url(String)"
            },
            "keyword": "* "
          }
        ]
      },
      {
        "line": 27,
        "name": "here we erase the configured headers to get a 400",
        "description": "",
        "id": "a-called-feature-can-\u0027contribute\u0027-to-variables-and-config;here-we-erase-the-configured-headers-to-get-a-400",
        "type": "scenario",
        "keyword": "Scenario",
        "steps": [
          {
            "result": {
              "duration": 1662605,
              "status": "passed"
            },
            "line": 28,
            "name": "configure headers \u003d null",
            "match": {
              "arguments": [
                {
                  "val": "headers",
                  "offset": 10
                },
                {
                  "val": "null",
                  "offset": 20
                }
              ],
              "location": "StepDefs.configure(String,String)"
            },
            "keyword": "* "
          },
          {
            "result": {
              "duration": 142011,
              "status": "passed"
            },
            "line": 29,
            "name": "path \u0027headers\u0027, token",
            "match": {
              "arguments": [
                {
                  "val": "\u0027headers\u0027, token",
                  "offset": 5
                }
              ],
              "location": "StepDefs.path(String\u003e)"
            },
            "keyword": "Given "
          },
          {
            "result": {
              "duration": 45382,
              "status": "passed"
            },
            "line": 30,
            "name": "param url \u003d demoBaseUrl",
            "match": {
              "arguments": [
                {
                  "val": "url",
                  "offset": 6
                },
                {
                  "val": "demoBaseUrl",
                  "offset": 12
                }
              ],
              "location": "StepDefs.param(String,String\u003e)"
            },
            "keyword": "And "
          },
          {
            "result": {
              "duration": 4811802,
              "status": "passed"
            },
            "line": 31,
            "name": "method get",
            "match": {
              "arguments": [
                {
                  "val": "get",
                  "offset": 7
                }
              ],
              "location": "StepDefs.method(String)"
            },
            "keyword": "When ",
            "doc_string": {
              "content_type": "",
              "line": 31,
              "value": "13:17:33.699 request:\n1 \u003e GET http://127.0.0.1:58351/headers/a3cf135c-4e50-40b9-8ff9-d64341c6979e?url\u003dhttp%3A%2F%2F127.0.0.1%3A58351\n1 \u003e Accept-Encoding: gzip,deflate\n1 \u003e Connection: Keep-Alive\n1 \u003e Cookie: time\u003d1537428753380\n1 \u003e Host: 127.0.0.1:58351\n1 \u003e User-Agent: Apache-HttpClient/4.5.5 (Java/1.8.0_162)\n\n13:17:33.702 response time in milliseconds: 3\n1 \u003c 400\n1 \u003c Cache-Control: no-cache, no-store, max-age\u003d0, must-revalidate\n1 \u003c Connection: close\n1 \u003c Content-Type: application/json;charset\u003dUTF-8\n1 \u003c Date: Thu, 20 Sep 2018 07:32:33 GMT\n1 \u003c Expires: 0\n1 \u003c Pragma: no-cache\n1 \u003c Transfer-Encoding: chunked\n1 \u003c X-Content-Type-Options: nosniff\n1 \u003c X-Frame-Options: DENY\n1 \u003c X-XSS-Protection: 1; mode\u003dblock\n{\"timestamp\":1537428753701,\"status\":400,\"error\":\"Bad Request\",\"exception\":\"org.springframework.web.bind.ServletRequestBindingException\",\"message\":\"Missing request header \u0027Authorization\u0027 for method parameter of type String[]\",\"path\":\"/headers/a3cf135c-4e50-40b9-8ff9-d64341c6979e\"}\n\n"
            }
          },
          {
            "result": {
              "duration": 40894,
              "status": "passed"
            },
            "line": 32,
            "name": "status 400",
            "match": {
              "arguments": [
                {
                  "val": "400",
                  "offset": 7
                }
              ],
              "location": "StepDefs.status(int)"
            },
            "keyword": "Then "
          }
        ]
      }
    ],
    "name": "demo/headers/call-updates-config.feature",
    "description": "a called feature can \u0027contribute\u0027 to variables and config\nincluding headers and cookies",
    "id": "a-called-feature-can-\u0027contribute\u0027-to-variables-and-config",
    "keyword": "Feature",
    "uri": "demo/headers/call-updates-config.feature"
  }
]