<?xml version="1.0" encoding="UTF-8"?>
<testsuite failures="0"
           name="encoding tests"
           skipped="0"
           tests="10"
           time="0.613838">
   <testcase classname="demo.encoding.encoding"
             name="special characters in the url"
             time="0.052359">
      <system-out>Given url demoBaseUrl + '/encoding/�Ill~Formed@RequiredString!'.............passed
When method get.............................................................passed
Then status 200.............................................................passed
And match response == '�Ill~Formed@RequiredString!'.........................passed
</system-out>
   </testcase>
   <testcase classname="demo.encoding.encoding"
             name="special characters in the path"
             time="0.037491">
      <system-out>Given url demoBaseUrl.......................................................passed
And path 'encoding', '�Ill~Formed@RequiredString!'..........................passed
When method get.............................................................passed
Then status 200.............................................................passed
And match response == '�Ill~Formed@RequiredString!'.........................passed
</system-out>
   </testcase>
   <testcase classname="demo.encoding.encoding"
             name="question mark in the url"
             time="0.041569">
      <system-out>Given url demoBaseUrl + '/encoding/index.php%3F/api/v2'.....................passed
And path 'hello'............................................................passed
When method get.............................................................passed
Then status 200.............................................................passed
And match response == 'hello'...............................................passed
</system-out>
   </testcase>
   <testcase classname="demo.encoding.encoding"
             name="manually decode before passing to karate"
             time="0.043969">
      <system-out>* def encoded = 'encoding%2Ffoo%2Bbar'......................................passed
* def decoded = java.net.URLDecoder.decode(encoded, 'UTF-8')................passed
Given url demoBaseUrl.......................................................passed
And path decoded............................................................passed
When method get.............................................................passed
Then status 200.............................................................passed
And match response == 'foo+bar'.............................................passed
</system-out>
   </testcase>
   <testcase classname="demo.encoding.encoding"
             name="german xml"
             time="0.026282">
      <system-out>Given url demoBaseUrl.......................................................passed
And path 'echo'.............................................................passed
And request &lt;name&gt;Müller&lt;/name&gt;.............................................passed
And header Content-Type = 'application/xml; charset=utf-8'..................passed
When method post............................................................passed
Then status 200.............................................................passed
And match response == &lt;name&gt;Müller&lt;/name&gt;...................................passed
</system-out>
   </testcase>
   <testcase classname="demo.encoding.encoding"
             name="french json"
             time="0.013897">
      <system-out>Given url demoBaseUrl.......................................................passed
And path 'echo'.............................................................passed
And request { givenName: 'oliàèôç' }........................................passed
And header Content-Type = 'application/json; charset=utf-8'.................passed
When method post............................................................passed
Then status 200.............................................................passed
And match response == { givenName: 'oliàèôç' }..............................passed
</system-out>
   </testcase>
   <testcase classname="demo.encoding.encoding"
             name="french json ISO-8859-1"
             time="0.309958">
      <system-out>Given url demoBaseUrl.......................................................passed
And path 'echo'.............................................................passed
And request { givenName: 'oliàèôç' }........................................passed
And header Content-Type = 'application/json; charset=ISO-8859-1'............passed
When method post............................................................passed
Then status 200.............................................................passed
And match response == { givenName: 'oliàèôç' }..............................passed
* def contentType = karate.prevRequest.headers['Content-Type'][0]...........passed
* match contentType contains 'application/json'.............................passed
* match contentType contains 'charset=ISO-8859-1'...........................passed
</system-out>
   </testcase>
   <testcase classname="demo.encoding.encoding"
             name="french &amp; german form field"
             time="0.020668">
      <system-out>Given url demoBaseUrl.......................................................passed
And path 'echo', 'message'..................................................passed
And form field text = 'oliàèôç Müller'......................................passed
And header Content-Type = 'application/x-www-form-urlencoded; charset=utf-8'.passed
When method post............................................................passed
Then status 200.............................................................passed
And match response == 'oliàèôç Müller'......................................passed
</system-out>
   </testcase>
   <testcase classname="demo.encoding.encoding"
             name="french &amp; german multipart"
             time="0.0567">
      <system-out>Given url demoBaseUrl.......................................................passed
Given path 'files'..........................................................passed
And multipart file myFile = { read: '../upload/karate-logo.jpg', filename: 'karate-logo.jpg', contentType: 'image/jpg' }.passed
And multipart field message = 'oliàèôç Müller'..............................passed
And header Content-Type = 'multipart/form-data; charset=utf-8'..............passed
When method post............................................................passed
Then status 200.............................................................passed
And match response == { id: '#uuid', filename: 'karate-logo.jpg', message: 'oliàèôç Müller', contentType: 'image/jpg' }.passed
</system-out>
   </testcase>
   <testcase classname="demo.encoding.encoding"
             name="multipart but forcing the charset to NOT be sent"
             time="0.010945">
      <system-out>Given url demoBaseUrl.......................................................passed
Given path 'files'..........................................................passed
And multipart file myFile = { read: '../upload/karate-logo.jpg', filename: 'karate-logo.jpg', contentType: 'image/jpg' }.passed
And multipart field message = 'oliàèôç Müller'..............................passed
And configure charset = null................................................passed
When method post............................................................passed
Then status 200.............................................................passed
And match response == { id: '#uuid', filename: 'karate-logo.jpg', message: 'oli???? M?ller', contentType: 'image/jpg' }.passed
</system-out>
   </testcase>
</testsuite>
